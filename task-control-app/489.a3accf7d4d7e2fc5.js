"use strict";(self.webpackChunktask_control_app=self.webpackChunktask_control_app||[]).push([[489],{4489:(O,u,a)=>{a.r(u),a.d(u,{AuthModule:()=>y});var r=a(4006),t=a(4650);let p=(()=>{class e{static forbiddenEmails(n){return-1!==["test@test.com","oleg_bob@ukr.net"].indexOf(n.value)?{emailIsForbidden:!0}:null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=a(6784);let c=(()=>{class e{constructor(n){this.vieContainerRef=n}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.s_b))},e.\u0275dir=t.lG2({type:e,selectors:[["","appPlaceholder",""]]}),e})();var m=a(8334),d=a(2152),g=a(6895);function h(e,o){}function f(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"div",5)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",6),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.closeAlert())}),t._uU(4,"OK"),t.qZA()()}if(2&e){const n=t.oxw();t.xp6(2),t.Oqu(n.userCreateMessage)}}function _(e,o){1&e&&(t.TgZ(0,"div",7),t._UZ(1,"app-loading-spinner"),t.qZA())}function x(e,o){1&e&&(t.TgZ(0,"span",17),t._uU(1,"This email is forbidden! "),t.qZA())}function C(e,o){1&e&&(t.TgZ(0,"span",17),t._uU(1," This field is required! "),t.qZA())}function b(e,o){1&e&&(t.TgZ(0,"span",17),t._uU(1," This email is not valid! "),t.qZA())}function A(e,o){if(1&e&&(t.TgZ(0,"span",17),t.YNc(1,x,2,0,"span",12),t.YNc(2,C,2,0,"span",12),t.YNc(3,b,2,0,"span",12),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==n.signupForm.get("email").errors?null:n.signupForm.get("email").errors.emailIsForbidden),t.xp6(1),t.Q6J("ngIf",n.signupForm.get("email").errors.required),t.xp6(1),t.Q6J("ngIf",n.signupForm.get("email").errors.pattern)}}function w(e,o){1&e&&(t.TgZ(0,"span",17),t._uU(1," This field is required! "),t.qZA())}function v(e,o){1&e&&(t.TgZ(0,"span",17),t._uU(1," Password should have 6 characters minimum! "),t.qZA())}function Z(e,o){if(1&e&&(t.TgZ(0,"span",17),t.YNc(1,w,2,0,"span",12),t.YNc(2,v,2,0,"span",12),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.signupForm.get("password").errors.required),t.xp6(1),t.Q6J("ngIf",n.signupForm.get("password").errors.minlength)}}function M(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"form",8),t.NdJ("ngSubmit",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.onSubmit())}),t.TgZ(1,"div",9)(2,"label",10),t._uU(3,"E-Mail"),t.qZA(),t._UZ(4,"input",11),t.YNc(5,A,4,3,"span",12),t.qZA(),t.TgZ(6,"div",9)(7,"label",13),t._uU(8,"Password"),t.qZA(),t._UZ(9,"input",14),t.YNc(10,Z,3,2,"span",12),t.qZA(),t.TgZ(11,"div")(12,"button",15),t._uU(13),t.qZA(),t._uU(14," | "),t.TgZ(15,"button",16),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.onSwitchMode())}),t._uU(16),t.qZA()()()}if(2&e){const n=t.oxw();t.Q6J("formGroup",n.signupForm),t.xp6(5),t.Q6J("ngIf",!n.signupForm.get("email").valid&&n.signupForm.get("email").touched),t.xp6(5),t.Q6J("ngIf",!n.signupForm.get("password").valid&&n.signupForm.get("password").touched),t.xp6(2),t.Q6J("disabled",!n.signupForm.valid),t.xp6(1),t.Oqu(n.isLoginMode?"Login":"Sign Up"),t.xp6(3),t.hij("Switch to ",n.isLoginMode?"Sign Up":"Login","")}}let T=(()=>{class e{constructor(n){this.authService=n,this.isLoginMode=!0,this.submitted=!1,this.isLoading=!1,this.error=null,this.userCreateMessage=null,this.pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$"}ngOnInit(){this.signupForm=new r.cw({email:new r.NI(null,[r.kI.required,p.forbiddenEmails,r.kI.pattern(this.pattern)]),password:new r.NI(null,[r.kI.required,r.kI.minLength(6)])})}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(){if(this.submitted=!0,!this.signupForm.valid)return;let n;this.isLoading=!0,this.isLoginMode?n=this.authService.login(this.signupForm.value):(this.isLoginMode=!0,n=this.authService.register(this.signupForm.value)),n.subscribe({next:i=>{this.isLoading=!1,this.userCreateMessage=i.message,this.error=null},error:i=>{this.error=i,this.showErrorAlert(i),this.isLoading=!1}}),this.signupForm.reset()}closeAlert(){this.userCreateMessage=null}onErrorHide(n){this.error=n}ngOnDestroy(){this.closeSub&&this.closeSub.unsubscribe()}showErrorAlert(n){const i=this.errorHost.vieContainerRef;i.clear();const s=i.createComponent(l.f);s.instance.error=n,this.closeSub=s.instance.close.subscribe(()=>{this.closeSub.unsubscribe(),i.clear()})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(m.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-auth"]],viewQuery:function(n,i){if(1&n&&t.Gf(c,5),2&n){let s;t.iGM(s=t.CRH())&&(i.errorHost=s.first)}},decls:5,vars:3,consts:[["appPlaceholder",""],[1,"container"],["class","alert alert-success",4,"ngIf"],["style","text-align: center",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-success"],[1,"button","btn-success",3,"click"],[2,"text-align","center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"form-control"],["class","help-block",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password","autocomplete","on",1,"form-control"],["type","submit",1,"button","btn-primary",3,"disabled"],["type","button",1,"button","btn-primary",3,"click"],[1,"help-block"]],template:function(n,i){1&n&&(t.YNc(0,h,0,0,"ng-template",0),t.TgZ(1,"div",1),t.YNc(2,f,5,1,"div",2),t.YNc(3,_,2,0,"div",3),t.YNc(4,M,17,6,"form",4),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngIf",i.userCreateMessage),t.xp6(1),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading))},dependencies:[d.g,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,c,g.O5],styles:[".container[_ngcontent-%COMP%]{width:90%;padding-left:15px;padding-right:15px;margin-right:auto;margin-left:auto}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:15px}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;max-width:100%;margin-bottom:5px;font-weight:700}.container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{display:block;width:100%;height:34px;padding:6px 12px;font-size:14px;line-height:1.43;color:#555;background-color:#fff;border-radius:4px;box-shadow:inset 0 1px 1px #00000014}@media (min-width: 768px) and (max-width: 1024px){.container[_ngcontent-%COMP%]{width:60%}}@media (min-width: 1024px) and (max-width: 1280px){.container[_ngcontent-%COMP%]{width:50%}}@media (min-width: 1280px) and (max-width: 1600px){.container[_ngcontent-%COMP%]{width:40%}}@media (min-width: 1600px) and (max-width: 1920px){.container[_ngcontent-%COMP%]{width:30%}}@media (min-width: 1920px){.container[_ngcontent-%COMP%]{width:20%}}"]}),e})();var F=a(4466),I=a(6264);let y=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[F.m,r.u5,r.UX,I.Bz.forChild([{path:"",component:T}])]}),e})()}}]);